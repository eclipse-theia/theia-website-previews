{"componentChunkName":"component---src-templates-doc-js","path":"/docs/consume_theia_fixes_master","result":{"data":{"markdownRemark":{"frontmatter":{"title":""},"html":"<h1 id=\"consuming-theia-featuresfixes-without-upgrading-theia\" style=\"position:relative;\"><a href=\"#consuming-theia-featuresfixes-without-upgrading-theia\" aria-label=\"consuming theia featuresfixes without upgrading theia permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Consuming Theia Features/Fixes Without Upgrading Theia</h1>\n<p>This guide outlines how to incorporate specific bug fixes or features from Theia's master branch into your project without needing to fully upgrade to a new version of Theia.</p>\n<h2 id=\"scenario\" style=\"position:relative;\"><a href=\"#scenario\" aria-label=\"scenario permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenario</h2>\n<p>Imagine you are developing a Theia application using version 1.43.0. You encounter a bug in Theia, report it, and the community fixes it. However, there is no immediate Theia release including this fix. This guide describes how to use this fix in your local development, e.g. to validate it or to just already consume it before the next Theia release is published.</p>\n<p>We also assume that:</p>\n<ul>\n<li>the bug fix you need has minimal changes; it involved changes to only a few packages</li>\n<li>the bug fix does not build upon or interact with any other Theia changes made since 1.43.0. i.e., it's a no-brainer to <a href=\"https://en.wikipedia.org/wiki/Backporting\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">backport</a></li>\n</ul>\n<h2 id=\"steps-to-incorporate-the-fix\" style=\"position:relative;\"><a href=\"#steps-to-incorporate-the-fix\" aria-label=\"steps to incorporate the fix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Steps to Incorporate the Fix</h2>\n<p>Note: In the following, we assume you are adopting the Theia version 1.43 which you want to hotfix(backport). Please replace \"1.43\" with the correct version of Theia that you currently build your project against.</p>\n<ol>\n<li>\n<p><strong>Clone and Branch Theia Codebase</strong>\n<br>\nClone the Theia codebase and checkout the version you are adopting in your project. Create a new branch from this version to apply the fix. </p>\n<p>For convenience, make sure to clone it next to where your Theia application repo is cloned. E.g., if your Theia app is in ~/git/myapp , make sure you clone the Theia repo such that it ends up at ~/git/theia . This isn't absolutely necessary, but will make things easier in a subsequent step. We'll be assuming you've done it that way.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone -b v1.43.0 https://github.com/eclipse-theia/theia.git\n<span class=\"token builtin class-name\">cd</span> theia\n<span class=\"token function\">git</span> checkout -b v1.43.0_with_fix</code></pre></div>\n<p>Now you have a local clone of the same exact Theia version your application is currently using. It doesn't have the backported fix, but the next steps will take care of that.</p>\n</li>\n<li><strong>Identify the commit to backport on master</strong>\n<br>\nBrowse the commit history of the Theia project in the master branch to identify the commit you want to backport. It will typically be linked on the corresponding ticket on Github. Identify the commit SHA that has the fix in the master branch. In the following, we assume it is <em>0a615512</em>.</li>\n<li>\n<p><strong>Cherry-Pick the Fix</strong>\n<br>\nUse the commit SHA of the fix to cherry-pick it onto your local Theia branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> cherry-pick 0a615512</code></pre></div>\n<p>Given the assumptions for this scenario, the cherry-pick should occur without any merge conflicts. If there are conflicts, you will need to address them. Now you have a local clone of Theia that includes the fix you want to backport.</p>\n</li>\n<li>\n<p><strong>Check Modified Files</strong>\n<br>\nUse the following command to see what files were altered by the fix.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> show --name-only --pretty<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span> 0a615512</code></pre></div>\n</li>\n<li>\n<p><strong>Adjust Package.json Files</strong>\n<br>\nIf the list of changes shows that any <code class=\"language-text\">package.json</code> files were modified, ensure that Theia package versions are not newer than 1.43. Open each one in an editor and replace any instances where a Theia package is referenced using a version newer than 1.43.0. E.g., if you find</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token property\">\"@theia/core\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.44.0\"</span><span class=\"token punctuation\">,</span>\n   ...\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>change 1.44.0 to 1.43.0 .\nIf you overlook or forget to adjust any such forward version references, you will probably encounter errors when you try to  build your local Theia version.</p>\n</li>\n<li><strong>Note Modified Packages</strong>\n<br>\nIdentify which packages in <code class=\"language-text\">packages/</code> and <code class=\"language-text\">dev-packages/</code> were affected.</li>\n<li><strong>Build Theia</strong>\n<br>\nRun <code class=\"language-text\">yarn</code> to build Theia in the modified branch.\n<br>\nWe assume here that everything builds without errors. If there are errors, double check your steps above (particular #5). If you didn't make any mistakes, then it's likely that the fix has dependencies on other changes that have happened in the codebase since Theia 1.43.0. That is not necessarily a deal breaker. You may be able to adjust the fix to make it work on top of the 1.43.0 codebase. It may require that you cherry-pick another small change or two (but hopefully not more than that). </li>\n<li>\n<p><strong>Use Modified Theia in Your App</strong>\n<br>\nIn your application's <code class=\"language-text\">package.json</code>, add resolutions for each modified package.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"resolutions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"**/@theia/core\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"file:../theia/packages/core\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"**/@theia/terminal\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"file:../theia/packages/terminal\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// more resolutions as needed</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><strong>Update Node Modules</strong>\n<br>\nUse <code class=\"language-text\">yarn install</code> with appropriate flags to update your <code class=\"language-text\">node_modules</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">install</span> --check-files --ignore-scripts</code></pre></div>\n<p><code class=\"language-text\">--check-files</code> tells yarn to skip the optimization it normally does and to ensure <code class=\"language-text\">node_modules</code> has what it should have.<br>\n<code class=\"language-text\">--ignore-scripts</code> lets us skip subsequent yarn lifecycle activity that isn't necessary in this particular step. We just want the <code class=\"language-text\">node_modules</code> to get updated.<br>\n<strong>Please Note:</strong> You will have to re-run this step if you later make any additional changes to the Theia codebase that affect the packages you specified in the resolutions section above (e.g., if you cherry-pick another commit). Keep in mind that the yarn install cmdline above does not create symlinks. It makes copies of directories in your Theia workspace and puts them in your apps's node_modules . Any subsequent changes in those Theia directories need to be copied over again.</p>\n</li>\n<li><strong>Build Your Application</strong>\n<br>\nFinally, run <code class=\"language-text\">yarn</code> in your application directory to build it with the new fixes.</li>\n</ol>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>By following these steps, you can backport Theia fixes or features into your application without waiting for an official release. This process is particularly useful for minor changes that don't depend on other recent codebase updates.</p>","fields":{"slug":"consume_theia_fixes_master"}}},"pageContext":{"slug":"consume_theia_fixes_master"}}}